- type: constructionGraph
  id: LockerMech
  start: start
  graph:
  - node: start
    edges:
    - to: lockermech
      steps:
      # 1) Создание корпуса (шкафа) - 4 стали. Занимает 2 секунды
#      - material: Steel
#        amount: 4
#        doAfter: 2
#        completed:
#        - !type:VisualizerDataInt
#          key: "enum.MechAssemblyVisuals.State"
#          data: 1

      # 2) Установка ящиков и фонарика - 2 ящика, фонарик. Занимает 10 секунд
      - tag: Toolbox
        name: аварийный ящик
        icon:
          sprite: "Objects/Tools/Toolboxes/toolbox_red.rsi"
          state: "icon"
        doAfter: 3

      - tag: Toolbox
        name: второй аварийный ящик
        icon:
          sprite: "Objects/Tools/Toolboxes/toolbox_red.rsi"
          state: "icon"
        doAfter: 3

      - tag: Toolbox
        name: электрический тулбокс
        icon:
          sprite: "Objects/Tools/Toolboxes/toolbox_yellow.rsi"
          state: "icon"
        doAfter: 2

      - tag: Flashlight
        name: фонарик
        icon:
          sprite: "Objects/Tools/flashlight.rsi"
          state: "flashlight"
        doAfter: 2
        completed:
        - !type:VisualizerDataInt
          key: "enum.MechAssemblyVisuals.State"
          data: 2

      # 3) Закрепление ящиков - использование отвёртки. Занимает 7 секунд
      - tool: Screwing
        doAfter: 7
        completed:
        - !type:VisualizerDataInt
          key: "enum.MechAssemblyVisuals.State"
          data: 3

      # 4) герметизация шкафа - использование включенного сварочного аппарата. Занимает 10 секунд
      - tool: Welding
        doAfter: 10
        completed:
        - !type:VisualizerDataInt
          key: "enum.MechAssemblyVisuals.State"
          data: 4

      # 5) Строительство надстроек - 5 стали, 2 стекла. Занимает 6 секунд.
      - material: Steel
        amount: 5
        doAfter: 3

      - material: Glass
        amount: 2
        doAfter: 3
        completed:
        - !type:VisualizerDataInt
          key: "enum.MechAssemblyVisuals.State"
          data: 5

      # 6) Установка баллона - 1 кислородный баллон. Занимает 4 секунды
      - tag: GasTank
        name: кислородный баллон
        icon:
          sprite: "Objects/Tanks/jetpack.rsi"
          state: "blue"
        doAfter: 4
        completed:
        - !type:VisualizerDataInt
          key: "enum.MechAssemblyVisuals.State"
          data: 6

      # 7) Установка гусениц. Занимает 7 секунд
      - material: Steel
        amount: 5
        name: гусеницы
        icon:
          sprite: "Structures/conveyor.rsi"
          state: "conveyor_loose"
        doAfter: 7
        completed:
        - !type:VisualizerDataInt
          key: "enum.MechAssemblyVisuals.State"
          data: 7

      # 8) Установка проводки - 10 НВ (LV) проводов. Занимает 10 секунд.
      - material: Cable
        amount: 10
        doAfter: 10
        completed:
        - !type:VisualizerDataInt
          key: "enum.MechAssemblyVisuals.State"
          data: 8

      # 9) Установка микросхемы шлюза - 1 микросхема шлюза. Занимает 3 секунды.
      - tag: DoorElectronics
        name: микросхема шлюза
        icon:
          sprite: "Objects/Misc/module.rsi"
          state: "door_electronics"
        doAfter: 3
        completed:
        - !type:VisualizerDataInt
          key: "enum.MechAssemblyVisuals.State"
          data: 9

      # 10) Установка электрооборудования - 3 конденсатора, 2 манипулятора. Занимает 3 секунды.
      - tag: CapacitorStockPart
        name: конденсаторы
        amount: 3
        icon:
          sprite: "Objects/Specific/Mech/mech_parts.rsi"
          state: "capacitor"
        doAfter: 3

      - tag: MicroManipulatorStockPart
        name: манипуляторы
        amount: 2
        icon:
          sprite: "Objects/Specific/Mech/mech_parts.rsi"
          state: "manipulator"
        doAfter: 0.25
        completed:
        - !type:VisualizerDataInt
          key: "enum.MechAssemblyVisuals.State"
          data: 10

      # 11) Установка ВВ проводки - 5 ВВ (HV) проводов. Занимает 5 секунд.
      - material: CableHV
        amount: 5
        doAfter: 5
        completed:
        - !type:VisualizerDataInt
          key: "enum.MechAssemblyVisuals.State"
          data: 11

      # 12) Установка энергоячейки - 1 энергоячейка. Занимает 1.5 секунды.
      - tag: PowerCage
        name: энергоячейка
        icon:
          sprite: "Objects/Power/power_cages.rsi"
          state: "medium"
        store: battery-container
        doAfter: 1.5
        completed:
        - !type:VisualizerDataInt
          key: "enum.MechAssemblyVisuals.State"
          data: 12

      # 13) Финальная сборка - использование включенного сварочного аппарата. Занимает 3 секунды.
      - tool: Welding
        doAfter: 3
        completed:
        - !type:VisualizerDataInt
          key: "enum.MechAssemblyVisuals.State"
          data: 13

  - node: lockermech
    actions:
    - !type:BuildMech
      mechPrototype: MechLocker
